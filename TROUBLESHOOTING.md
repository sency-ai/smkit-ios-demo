# Troubleshooting

## Switching Between CocoaPods and SPM

> **Note:** CocoaPods and SPM both provide the same frameworks (`SMKit`, `SMBase`). Only one can be active at a time — using both will cause a "Multiple commands produce" build error.

### Switching from CocoaPods to SPM

1. **Remove CocoaPods from your project:**
   ```bash
   pod deintegrate
   ```

2. **Clean derived data:**
   ```bash
   rm -rf ~/Library/Developer/Xcode/DerivedData/*
   ```

3. **Remove CocoaPods artifacts** (optional but recommended):
   ```bash
   rm -rf Pods/
   rm Podfile.lock
   ```

4. **Open the `.xcodeproj` file** (not the `.xcworkspace` — the workspace was generated by CocoaPods)

5. **Follow the SPM integration steps** in the [`release/1.4.6_spm`](https://github.com/sency-ai/smkit-ios-demo/tree/release/1.4.6_spm) branch README

6. **Build your project** to verify the integration

### Switching from SPM back to CocoaPods

1. **In Xcode, remove the SPM package:**
   - Select your project in the navigator
   - Go to the **Package Dependencies** tab
   - Select `smkit_package` and click the **-** button to remove it

2. **Clean derived data:**
   ```bash
   rm -rf ~/Library/Developer/Xcode/DerivedData/*
   ```

3. **Ensure your `Podfile` has the SMKit pod:**
   ```ruby
   platform :ios, '16.0'

   source 'https://bitbucket.org/sencyai/ios_sdks_release.git'
   source 'https://github.com/CocoaPods/Specs.git'

   target 'YourApp' do
     use_frameworks!
     pod 'SMKit', '1.4.6'
   end

   post_install do |installer|
     installer.pods_project.targets.each do |target|
       target.build_configurations.each do |config|
         config.build_settings['BUILD_LIBRARY_FOR_DISTRIBUTION'] = 'YES'
         config.build_settings['EXCLUDED_ARCHS[sdk=iphonesimulator*]'] = 'arm64'
         config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '16.0'
       end
     end
   end
   ```

4. **Install the pods:**
   ```bash
   pod install
   ```

5. **Open the `.xcworkspace` file** (not `.xcodeproj`) and build to verify

---

Having issues? [Contact us](mailto:support@sency.ai) and let us know what the problem is.
